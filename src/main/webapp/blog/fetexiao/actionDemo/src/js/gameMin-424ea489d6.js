!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1);n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),window.qc=i},function(t,e){window.qc=window.qc||{},window.ClassManager={id:0|998*Math.random(),instanceId:0|998*Math.random(),compileSuper:function(t,e,n){var i=t.toString(),r=i.indexOf("("),o=i.indexOf(")"),s=i.substring(r+1,o);s=s.trim();for(var a=i.indexOf("{"),c=i.lastIndexOf("}"),i=i.substring(a+1,c);i.indexOf("this._super")!=-1;){var u=i.indexOf("this._super"),h=i.indexOf("(",u),l=i.indexOf(")",h),d=i.substring(h+1,l);d=d.trim();var _=d?",":"";i=i.substring(0,u)+"ClassManager["+n+"]."+e+".call(this"+_+i.substring(h+1)}return Function(s,i)},getNewID:function(){return this.id++},getNewInstanceId:function(){return this.instanceId++}},ClassManager.compileSuper.ClassManager=ClassManager,function(){var t=/\b_super\b/,e=!1;qc.Class=function(){},qc.Class.extend=function(n){function i(){this.__instanceId=ClassManager.getNewInstanceId(),this.ctor&&this.ctor.apply(this,arguments)}var r=this.prototype,o=Object.create(r),s=ClassManager.getNewID();ClassManager[s]=r;var a={writable:!0,enumerable:!1,configurable:!0};o.__instanceId=null,i.id=s,a.value=s,Object.defineProperty(o,"__pid",a),i.prototype=o,a.value=i,Object.defineProperty(i.prototype,"constructor",a),this.__getters__&&(i.__getters__=qc.clone(this.__getters__)),this.__setters__&&(i.__setters__=qc.clone(this.__setters__));for(var c=0,u=arguments.length;c<u;++c){var h=arguments[c];for(var l in h){var d="function"==typeof h[l],_="function"==typeof r[l],f=t.test(h[l]);if(e&&d&&_&&f?(a.value=ClassManager.compileSuper(h[l],l,s),Object.defineProperty(o,l,a)):d&&_&&f?(a.value=function(t,e){return function(){var n=this._super;this._super=r[t];var i=e.apply(this,arguments);return this._super=n,i}}(l,h[l]),Object.defineProperty(o,l,a)):d?(a.value=h[l],Object.defineProperty(o,l,a)):o[l]=h[l],d){var g,p,v;if(this.__getters__&&this.__getters__[l]){v=this.__getters__[l];for(var m in this.__setters__)if(this.__setters__[m]==v){p=m;break}qc.defineGetterSetter(o,v,h[l],h[p]?h[p]:o[p],l,p)}if(this.__setters__&&this.__setters__[l]){v=this.__setters__[l];for(var m in this.__getters__)if(this.__getters__[m]==v){g=m;break}qc.defineGetterSetter(o,v,h[g]?h[g]:o[g],h[l],g,l)}}}}return i.extend=qc.Class.extend,i.implement=function(t){for(var e in t)o[e]=t[e]},i},Function.prototype.bind=Function.prototype.bind||function(t){var e=this;return function(){var n=Array.prototype.slice.call(arguments);return e.apply(t||null,n)}}}(),qc.defineGetterSetter=function(t,e,n,i,r,o){if(t.__defineGetter__)n&&t.__defineGetter__(e,n),i&&t.__defineSetter__(e,i);else{if(!Object.defineProperty)throw new Error("browser does not support getters");var s={enumerable:!1,configurable:!0};n&&(s.get=n),i&&(s.set=i),Object.defineProperty(t,e,s)}if(!r&&!o)for(var a=null!=n,c=void 0!=i,u=Object.getOwnPropertyNames(t),h=0;h<u.length;h++){var l=u[h];if((t.__lookupGetter__?!t.__lookupGetter__(l):!Object.getOwnPropertyDescriptor(t,l))&&"function"==typeof t[l]){var d=t[l];if(a&&d===n&&(r=l,!c||o))break;if(c&&d===i&&(o=l,!a||r))break}}var _=t.constructor;r&&(_.__getters__||(_.__getters__={}),_.__getters__[r]=e),o&&(_.__setters__||(_.__setters__={}),_.__setters__[o]=e)},qc.clone=function(t){var e=t.constructor?new t.constructor:{};for(var n in t){var i=t[n];"object"!=typeof i||!i||i instanceof qc.Node||i instanceof HTMLElement?e[n]=i:e[n]=qc.clone(i)}return e},t.exports=qc},function(t,e,n){var i=n(1);i.g_NumberOfDraws=0,i.defaultFPS=60,i.Director=i.Class.extend({_animationInterval:null,_scenesStack:null,_lastUpdate:null,_frameRate:0,_purgeDirectorInNextLoop:!1,invalid:!1,_deltaTime:0,_nextScene:null,_runningScene:null,_sendCleanupToScene:!1,_actionManager:null,ctor:function(){var t=this;t._lastUpdate=Date.now()},init:function(){return this._animationInterval=1/i.defaultFPS,this._scenesStack=[],this._lastUpdate=Date.now(),this._actionManager=i.ActionManager._getInstance(),i.log(this._actionManager),this._paused=!1,!0},getWinSize:function(){return i.size(i._canvas.width,i._canvas.height)},mainLoop:function(){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):this.invalid||this.drawScene()},calculateDeltaTime:function(){var t=Date.now();this._deltaTime=(t-this._lastUpdate)/1e3,this._lastUpdate=t},_clear:function(){var t=i.rect(0,0,i._canvas.width,i._canvas.height);i._renderContext.clearRect(-t.x,t.y,t.width,-t.height)},setNextScene:function(){var t=this._runningScene;t&&(t.onExit(),t.cleanup()),this._runningScene=this._nextScene,this._nextScene=null,this._runningScene.onEnter()},getActionManager:function(){return this._actionManager},drawScene:function(){this.calculateDeltaTime(),this._paused||this._actionManager.update(this._deltaTime),this._clear(),this._nextScene&&this.setNextScene(),this._beforeVisitScene&&this._beforeVisitScene(),this._runningScene&&this._runningScene.visit(),this._afterVisitScene&&this._afterVisitScene()},_beforeVisitScene:null,_afterVisitScene:null,purgeDirector:function(){},pushScene:function(t){this._sendCleanupToScene=!1,this._scenesStack.push(t),this._nextScene=t},runScene:function(t){if(this._runningScene){var e=this._scenesStack.length;0===e?(this._sendCleanupToScene=!0,this._scenesStack[e]=t,this._nextScene=t):(this._sendCleanupToScene=!0,this._scenesStack[e-1]=t,this._nextScene=t)}else this.pushScene(t)}}),i.Director.sharedDirector=null,i.Director.firstUseDirector=!0,i.Director._getInstance=function(){return i.Director.firstUseDirector&&(i.Director.firstUseDirector=!1,i.Director.sharedDirector=new i.Director,i.Director.sharedDirector.init()),i.Director.sharedDirector},t.exports=i},function(t,e,n){var i=n(1);i._loadingImage="",i.newElement=function(t){return document.createElement(t)},i._addEventListener=function(t,e,n,i){t.addEventListener(e,n,i)},i.each=function(t,e,n){if(t)if(t instanceof Array){for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i)===!1)return}else for(var o in t)if(e.call(n,t[o],o)===!1)return},i.isCrossOrigin=function(t){if(!t)return i.log("invalid URL"),!1;var e=t.indexOf("://");if(e==-1)return!1;var n=t.indexOf("/",e+3),r=n==-1?t:t.substring(0,n);return r!=location.origin},i.path={join:function(){for(var t=arguments.length,e="",n=0;n<t;n++)e=(e+(""==e?"":"/")+arguments[n]).replace(/(\/|\\\\)$/,"");return e},extname:function(t){var e=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(t);return e?e[1]:null},mainFileName:function(t){if(t){var e=t.lastIndexOf(".");if(e!==-1)return t.substring(0,e)}return t},basename:function(t,e){var n=t.indexOf("?");n>0&&(t=t.substring(0,n));var i=/(\/|\\\\)([^(\/|\\\\)]+)$/g,r=i.exec(t.replace(/(\/|\\\\)$/,""));if(!r)return null;var o=r[2];return e&&t.substring(t.length-e.length).toLowerCase()==e.toLowerCase()?o.substring(0,o.length-e.length):o},dirname:function(t){return t.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(t,e){e=e||"";var n=t.indexOf("?"),i="";return n>0&&(i=t.substring(n),t=t.substring(0,n)),n=t.lastIndexOf("."),n<0?t+e+i:t.substring(0,n)+e+i},changeBasename:function(t,e,n){if(0==e.indexOf("."))return this.changeExtname(t,e);var i=t.indexOf("?"),r="",o=n?this.extname(t):"";return i>0&&(r=t.substring(i),t=t.substring(0,i)),i=t.lastIndexOf("/"),i=i<=0?0:i+1,t.substring(0,i)+e+o+r}},i.async={_counterFunc:function(t){var e=this.counter;if(!e.err){var n=e.length,i=e.results,r=e.option,o=r.cb,s=r.cbTarget,a=r.trigger,c=r.triggerTarget;if(t){if(e.err=t,o)return o.call(s,t)}else{var u=Array.apply(null,arguments).slice(1),h=u.length;0==h?u=null:1==h&&(u=u[0]),i[this.index]=u,e.count--,a&&a.call(c,u,n-e.count,n),0==e.count&&o&&o.apply(s,[null,i])}}},_emptyFunc:function(){},parallel:function(t,e,n){var r=i.async;if(void 0!==n)"function"==typeof e&&(e={trigger:e}),e.cb=n||e.cb;else if(void 0!==e)"function"==typeof e&&(e={cb:e});else{if(void 0===t)throw"arguments error!";e={}}var o=t instanceof Array,s=o?t.length:Object.keys(t).length;if(0==s)return void(e.cb&&e.cb.call(e.cbTarget,null));var a=o?[]:{},c={length:s,count:s,option:e,results:a};i.each(t,function(t,n){if(c.err)return!1;var i=e.cb||e.trigger?r._counterFunc.bind({counter:c,index:n}):r._emptyFunc;t(i,n)})},map:function(t,e,n){var r=this,o=arguments.length;if("function"==typeof e&&(e={iterator:e}),3===o)e.cb=n||e.cb;else if(o<2)throw"arguments error!";if("function"==typeof e&&(e={iterator:e}),void 0!==n)e.cb=n||e.cb;else if(void 0===t)throw"arguments error!";var s=t instanceof Array,a=s?t.length:Object.keys(t).length;if(0===a)return void(e.cb&&e.cb.call(e.cbTarget,null));var c=s?[]:{},u={length:a,count:a,option:e,results:c};i.each(t,function(t,n){if(u.err)return!1;var i=e.cb?r._counterFunc.bind({counter:u,index:n}):r._emptyFunc;e.iterator.call(e.iteratorTarget,t,n,i)})}},i.loader={_jsCache:{},_register:{},_langPathCache:{},_aliases:{},resPath:"",audioPath:"",cache:{},getXMLHttpRequest:function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},_getArgs4Js:function(t){var e=t[0],n=t[1],i=t[2],r=["",null,null];if(1===t.length)r[1]=e instanceof Array?e:[e];else if(2===t.length)"function"==typeof n?(r[1]=e instanceof Array?e:[e],r[2]=n):(r[0]=e||"",r[1]=n instanceof Array?n:[n]);else{if(3!==t.length)throw"arguments error to load js!";r[0]=e||"",r[1]=n instanceof Array?n:[n],r[2]=i}return r},loadJs:function(t,e,n){var r=this,o=r._jsCache,s=r._getArgs4Js(arguments);i.async.map(s[1],function(t,e,n){var a=i.path.join(s[0],t);return o[a]?n(null):void r._createScript(a,!1,n)},s[2])},loadJsWithImg:function(t,e,n){var i=this,r=i._loadJsImg(),o=i._getArgs4Js(arguments);this.loadJs(o[0],o[1],function(t){if(t)throw t;r.parentNode.removeChild(r),o[2]&&o[2]()})},_createScript:function(t,e,n){var r=document,o=this,s=i.newElement("script");s.async=e,s.src=t,o._jsCache[t]=!0,i._addEventListener(s,"load",function(){this.removeEventListener("load",arguments.callee,!1),n()},!1),i._addEventListener(s,"error",function(){n("Load "+t+" failed!")},!1),r.body.appendChild(s)},_loadJsImg:function(){var t=document,e=t.getElementById("loadJsImg");if(!e){e=i.newElement("img"),i._loadingImage&&(e.src=i._loadingImage);var n=t.getElementById(i.game.config.id);n.style.backgroundColor="black",n.parentNode.appendChild(e);var r=getComputedStyle?getComputedStyle(n):n.currentStyle;r||(r={width:n.width,height:n.height}),e.style.left=n.offsetLeft+(parseFloat(r.width)-e.width)/2+"px",e.style.top=n.offsetTop+(parseFloat(r.height)-e.height)/2+"px",e.style.position="absolute"}return e},loadTxt:function(t,e){var n=this.getXMLHttpRequest(),i="load "+t+" failed!";n.open("GET",t,!0),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?(n.setRequestHeader("Aqcept-Charset","utf-8"),n.onreadystatechange=function(){4==n.readyState&&200==n.status?e(null,n.responseText):e(i)}):(n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onload=function(){4==n.readyState&&200==n.status?e(null,n.responseText):e(i)}),n.send(null)},_loadTxtSync:function(t){var e=this.getXMLHttpRequest();return e.open("GET",t,!1),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?e.setRequestHeader("Aqcept-Charset","utf-8"):e.overrideMimeType&&e.overrideMimeType("text/plain; charset=utf-8"),e.send(null),4==!e.readyState||200!=e.status?null:e.responseText},loadJson:function(t,e){this.loadTxt(t,function(n,i){try{n?e(n):e(null,JSON.parse(i))}catch(e){throw"load json ["+t+"] failed : "+e}})},_checkIsImageURL:function(t){var e=/(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(t);return null!=e},loadImg:function(t,e,n){var r={isCrossOrigin:!0};void 0!==n?r.isCrossOrigin=null==e.isCrossOrigin?r.isCrossOrigin:e.isCrossOrigin:void 0!==e&&(n=e);var o=new Image;return i._addEventListener(o,"load",function(){this.removeEventListener("load",arguments.callee,!1),this.removeEventListener("error",arguments.callee,!1),n&&n(null,o)}),i._addEventListener(o,"error",function(){this.removeEventListener("error",arguments.callee,!1),n&&n("load image failed")}),o.src=t,o},_loadResIterator:function(t,e,n){var r=this,o=null,s=t.type;s?(s="."+s.toLowerCase(),o=t.src?t.src:t.name+s):(o=t,s=i.path.extname(o));var a=r.cache[o];if(a)return n(null,a);var c=r._register[s.toLowerCase()];if(!c)return i.error("loader for ["+s+"] not exists!"),n();var u=c.getBasePath?c.getBasePath():r.resPath,h=r.getUrl(u,o);c.load(h,o,t,function(t,e){t?(i.log(t),r.cache[o]=null,delete r.cache[o],n()):(r.cache[o]=e,n(null,e))})},getUrl:function(t,e){var n=this,r=n._langPathCache,o=i.path;if(void 0!==t&&void 0===e){e=t;var s=o.extname(e);s=s?s.toLowerCase():"";var a=n._register[s];t=a&&a.getBasePath?a.getBasePath():n.resPath}if(e=i.path.join(t||"",e),e.match(/[\/(\\\\)]lang[\/(\\\\)]/i)){if(r[e])return r[e];var c=o.extname(e)||"";e=r[e]=e.substring(0,e.length-c.length)+"_"+i.sys.language+c}return e},load:function(t,e,n){if(void 0!==n)"function"==typeof e&&(e={trigger:e});else if(void 0!==e)"function"==typeof e&&(n=e,e={});else{if(void 0===t)throw"arguments error!";e={}}e.cb=function(t,e){t&&i.log(t),n&&n(e)},t instanceof Array||(t=[t]),e.iterator=this._loadResIterator,e.iteratorTarget=this,i.async.map(t,e)},_handleAliases:function(t,e){var n=this,i=n._aliases,r=[];for(var o in t){var s=t[o];i[o]=s,r.push(s)}this.load(r,e)},loadAliases:function(t,e){var n=this,i=n.getRes(t);i?n._handleAliases(i.filenames,e):n.load(t,function(t){n._handleAliases(t[0].filenames,e)})},register:function(t,e){if(t&&e){var n=this;if("string"==typeof t)return this._register[t.trim().toLowerCase()]=e;for(var i=0,r=t.length;i<r;i++)n._register["."+t[i].trim().toLowerCase()]=e}},getRes:function(t){return this.cache[t]||this.cache[this._aliases[t]]},release:function(t){var e=this.cache,n=this._aliases;delete e[t],delete e[n[t]],delete n[t]},releaseAll:function(){var t=this.cache,e=this._aliases;for(var n in t)delete t[n];for(var n in e)delete e[n]}},i.p=function(t,e){return void 0==t?{x:0,y:0}:void 0==e?{x:t.x,y:t.y}:{x:t,y:e}},i.size=function(t,e){return void 0===t?{width:0,height:0}:void 0===e?{width:t.width,height:t.height}:{width:t,height:e}},i.rect=function(t,e,n,i){return void 0===t?{x:0,y:0,width:0,height:0}:void 0===e?{x:t.x,y:t.y,width:t.width,height:t.height}:{x:t,y:e,width:n,height:i}},i.color=function(t,e,n){return{r:t,g:e,b:n}},i._formatString=function(t){if("object"!=typeof t)return t;try{return JSON.stringify(t)}catch(t){return""}},i.assert=function(t,e){if(!t&&e)throw e},i.log=function(t){for(var e=1;e<arguments.length;e++)t=t.replace(/(%s)|(%d)/,i._formatString(arguments[e]));console.log(t)},i.warn=console.warn?function(t){for(var e=1;e<arguments.length;e++)t=t.replace(/(%s)|(%d)/,i._formatString(arguments[e]));console.warn(t)}:i.log,i.error=console.error?function(t){for(var e=1;e<arguments.length;e++)t=t.replace(/(%s)|(%d)/,i._formatString(arguments[e]));console.error(t)}:i.log,i.arrayRemoveObject=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e){t.splice(n,1);break}},i._rectEqualToZero=function(t){return t&&0===t.x&&0===t.y&&0===t.width&&0===t.height},i._initSys=function(t,e){i._RENDER_TYPE_CANVAS=0;var n=i.sys={};n.LANGUAGE_ENGLISH="en",n.LANGUAGE_CHINESE="zh",n.LANGUAGE_FRENCH="fr",n.LANGUAGE_ITALIAN="it",n.LANGUAGE_GERMAN="de",n.LANGUAGE_SPANISH="es",n.LANGUAGE_RUSSIAN="ru",n.LANGUAGE_KOREAN="ko",n.LANGUAGE_JAPANESE="ja",n.LANGUAGE_HUNGARIAN="hu",n.LANGUAGE_PORTUGUESE="pt",n.LANGUAGE_ARABIC="ar",n.LANGUAGE_NORWEGIAN="no",n.LANGUAGE_POLISH="pl",n.OS_WINDOWS="Windows",n.OS_IOS="iOS",n.OS_OSX="OS X",n.OS_UNIX="UNIX",n.OS_LINUX="Linux",n.OS_ANDROID="Android",n.OS_UNKNOWN="Unknown",n.BROWSER_TYPE_WECHAT="wechat",n.BROWSER_TYPE_ANDROID="androidbrowser",n.BROWSER_TYPE_IE="ie",n.BROWSER_TYPE_QQ="qqbrowser",n.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",n.BROWSER_TYPE_UC="ucbrowser",n.BROWSER_TYPE_360="360browser",n.BROWSER_TYPE_BAIDU_APP="baiduboxapp",n.BROWSER_TYPE_BAIDU="baidubrowser",n.BROWSER_TYPE_MAXTHON="maxthon",n.BROWSER_TYPE_OPERA="opera",n.BROWSER_TYPE_MIUI="miuibrowser",n.BROWSER_TYPE_FIREFOX="firefox",n.BROWSER_TYPE_SAFARI="safari",n.BROWSER_TYPE_CHROME="chrome",n.BROWSER_TYPE_UNKNOWN="unknown",n.isNative=!1;var r=[n.BROWSER_TYPE_BAIDU,n.BROWSER_TYPE_OPERA,n.BROWSER_TYPE_FIREFOX,n.BROWSER_TYPE_CHROME,n.BROWSER_TYPE_SAFARI],o=[n.BROWSER_TYPE_BAIDU,n.BROWSER_TYPE_OPERA,n.BROWSER_TYPE_FIREFOX,n.BROWSER_TYPE_CHROME,n.BROWSER_TYPE_SAFARI,n.BROWSER_TYPE_UC,n.BROWSER_TYPE_QQ,n.BROWSER_TYPE_MOBILE_QQ,n.BROWSER_TYPE_IE],s=window,a=s.navigator,c=document,u=c.documentElement,h=a.userAgent.toLowerCase();n.isMobile=h.indexOf("mobile")!=-1||h.indexOf("android")!=-1;var l=a.language;l=l?l:a.browserLanguage,l=l?l.split("-")[0]:n.LANGUAGE_ENGLISH,n.language=l;var d=n.BROWSER_TYPE_UNKNOWN,_=h.match(/micromessenger|qqbrowser|mqqbrowser|ucbrowser|360browser|baiduboxapp|baidubrowser|maxthon|trident|opera|miuibrowser|firefox/i)||h.match(/chrome|safari/i);_&&_.length>0&&(d=_[0].toLowerCase(),"micromessenger"==d?d=n.BROWSER_TYPE_WECHAT:"safari"===d&&h.match(/android.*applewebkit/)?d=n.BROWSER_TYPE_ANDROID:"trident"==d&&(d=n.BROWSER_TYPE_IE)),n.browserType=d,n._supportMultipleAudio=o.indexOf(n.browserType)>-1;var f=parseInt(t[e.renderMode]),g=i._RENDER_TYPE_CANVAS,p=i.newElement("Canvas");i._supportRender=!0;var v=r.indexOf(n.browserType)==-1;if((1===f||0===f&&(n.isMobile||v))&&(g=i._RENDER_TYPE_CANVAS),g==i._RENDER_TYPE_CANVAS)try{p.getContext("2d")}catch(t){i._supportRender=!1}i._renderType=g;try{n._supportWebAudio=!!new(s.AudioContext||s.webkitAudioContext||s.mozAudioContext)}catch(t){n._supportWebAudio=!1}try{var m=n.localStorage=s.localStorage;m.setItem("storage",""),m.removeItem("storage"),m=null}catch(t){"SECURITY_ERR"!==t.name&&"QuotaExceededError"!==t.name||i.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option"),n.localStorage=function(){}}var x=n.capabilities={canvas:!0};void 0!==u.ontouchstart||a.msPointerEnabled?x.touches=!0:void 0!==u.onmouseup&&(x.mouse=!0),void 0!==u.onkeyup&&(x.keyboard=!0),(s.DeviceMotionEvent||s.DeviceOrientationEvent)&&(x.aqcelerometer=!0);var E=!!h.match(/(iPad|iPhone|iPod)/i),T=!(!h.match(/android/i)&&!a.platform.match(/android/i)),y=n.OS_UNKNOWN;a.appVersion.indexOf("Win")!=-1?y=n.OS_WINDOWS:E?y=n.OS_IOS:a.appVersion.indexOf("Mac")!=-1?y=n.OS_OSX:a.appVersion.indexOf("X11")!=-1?y=n.OS_UNIX:a.appVersion.indexOf("Linux")!=-1?y=n.OS_LINUX:T&&(y=n.OS_ANDROID),n.os=y,n.garbageCollect=function(){},n.dumpRoot=function(){},n.restartVM=function(){},n.dump=function(){var t=this,e="";e+="isMobile : "+t.isMobile+"\r\n",e+="language : "+t.language+"\r\n",e+="browserType : "+t.browserType+"\r\n",e+="capabilities : "+JSON.stringify(t.capabilities)+"\r\n",e+="os : "+t.os+"\r\n",i.log(e)}},i.ORIENTATION_PORTRAIT=0,i.ORIENTATION_PORTRAIT_UPSIDE_DOWN=1,i.ORIENTATION_LANDSCAPE_LEFT=2,i.ORIENTATION_LANDSCAPE_RIGHT=3,i._drawingUtil=null,i._renderContext=null,i._canvas=null,i._gameDiv=null,i._rendererInitialized=!1,i._setupCalled=!1,i._setup=function(t,e,n){if(!i._setupCalled){i._setupCalled=!0;var r=window;r.requestAnimFrame=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame;var o,s,a,c,u=i.$(t)||i.$("#"+t);"CANVAS"==u.tagName?(e=e||u.width,n=n||u.height,c=i.newElement("DIV"),c.setAttribute("class","horizontal_center"),s=i.container=i.newElement("DIV"),o=i._canvas=u,o.parentNode.insertBefore(c,o),o.parentNode.insertBefore(s,o),i.$(s).appendTo(c),o.appendTo(s),s.setAttribute("id","QCGameContainer")):("DIV"!=u.tagName&&i.log("Warning: target element is not a DIV or CANVAS"),e=e||u.clientWidth,n=n||u.clientHeight,s=i.container=u,o=i._canvas=i.$(i.newElement("CANVAS")),u.appendChild(o)),o.addClass("gameCanvas"),o.setAttribute("width",e||480),o.setAttribute("height",n||320),o.setAttribute("tabindex",99),o.style.outline="none";var h=o.style;if(h.width="100%",h.height="100%",a=s.style,a.width=(e||480)+"px",a.height=(n||320)+"px",a.margin="0 auto",a.position="relative",a.overflow="hidden",s.top="100%",i._renderContext=o.getContext("2d"),i._mainRenderContextBackup=i._renderContext,i._renderContext.translate(0,o.height),i._gameDiv=s,i.sys.isMobile){var l=i.newElement("style");l.type="text/css",document.body.appendChild(l),l.textContent="body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}"}var d=i.resizeCall=function(){var t,i,r=window.innerWidth,o=window.innerHeight,s=e/n,u=r/o;s>u?(t=r,i=r/e*n):(i=o,t=o/n*e),a.width=(t||480)+"px",a.height=(i||320)+"px",c.style.width="100%",c.style.height=o+"px"};d(),window.addEventListener("resize",d,!1),i.EventManager.registerSystemEvent(i._canvas),i.director=i.Director._getInstance(),i.winSize=i.director.getWinSize(),i.log(i.winSize)}},i.game={DEBUG_MODE_NONE:0,DEBUG_MODE_INFO:1,DEBUG_MODE_WARN:2,DEBUG_MODE_ERROR:3,DEBUG_MODE_INFO_FOR_WEB_PAGE:4,DEBUG_MODE_WARN_FOR_WEB_PAGE:5,DEBUG_MODE_ERROR_FOR_WEB_PAGE:6,EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",_eventHide:null,_eventShow:null,_onBeforeStartArr:[],CONFIG_KEY:{engineDir:"engineDir",dependencies:"dependencies",debugMode:"debugMode",showFPS:"showFPS",frameRate:"frameRate",id:"id",renderMode:"renderMode",jsList:"jsList",classReleaseMode:"classReleaseMode"},_prepareCalled:!1,_prepared:!1,_paused:!0,_intervalId:null,config:null,onStart:null,onStop:null,setFrameRate:function(t){var e=this,n=e.config,i=e.CONFIG_KEY;n[i.frameRate]=t,e._intervalId&&clearInterval(e._intervalId),e._paused=!0,e._runMainLoop()},_runMainLoop:function(){var t,e=this,n=e.config,r=e.CONFIG_KEY,o=(window,n[r.frameRate]),s=i.director;t=function(){s.mainLoop()},e._intervalId=setInterval(t,1e3/o),e._paused=!1},stop:function(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},run:function(t){var e=this,n=function(){t&&(e.config[e.CONFIG_KEY.id]=t),i._supportRender&&(i._setup(e.config[e.CONFIG_KEY.id]),e._runMainLoop(),e.onStart(),e._checkPrepare=setInterval(function(){clearInterval(e._checkPrepare)},10))};document.body?n():i._addEventListener(window,"load",function(){this.removeEventListener("load",arguments.callee,!1),n()},!1)},_initConfig:function(){var t=this,e=t.CONFIG_KEY,n=function(t){return t[e.engineDir]=t[e.engineDir]||"frameworks/qunar-c",t[e.frameRate]=t[e.frameRate]||60,t};if(document.qcConfig)t.config=n(document.qcConfig);else try{var r={project_type:"javascript",frameRate:60,id:"gameCanvas",engineDir:"",jsList:[]};t.config=n(r||{})}catch(e){i.log("Failed to read or parse project.json"),t.config=n({})}i._initSys(t.config,e)},_jsAddedCache:{},_getJsListOfModule:function(t,e,n){var r=this._jsAddedCache;if(r[e])return null;n=n||"";var o=[],s=t[e];if(!s)throw"can not find module ["+e+"]";for(var a=i.path,c=0,u=s.length;c<u;c++){var h=s[c];if(!r[h]){var l=a.extname(h);if(l)".js"==l.toLowerCase()&&o.push(a.join(n,h));else{var d=this._getJsListOfModule(t,h,n);d&&(o=o.concat(d))}r[h]=1}}return o}},i.game._initConfig(),t.exports=i},function(t,e,n){var i=n(1);switch(i.$=function(t){var e=this==i?document:this,n=t instanceof HTMLElement?t:e.querySelector(t);return n&&(n.find=n.find||i.$,n.hasClass=n.hasClass||function(t){return this.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},n.addClass=n.addClass||function(t){return this.hasClass(t)||(this.className&&(this.className+=" "),this.className+=t),this},n.removeClass=n.removeClass||function(t){return this.hasClass(t)&&(this.className=this.className.replace(t,"")),this},n.remove=n.remove||function(){return this.parentNode&&this.parentNode.removeChild(this),this},n.appendTo=n.appendTo||function(t){return t.appendChild(this),this},n.prependTo=n.prependTo||function(t){return t.childNodes[0]?t.insertBefore(this,t.childNodes[0]):t.appendChild(this),this},n.transforms=n.transforms||function(){return this.style[i.$.trans]=i.$.translate(this.position)+i.$.rotate(this.rotation)+i.$.scale(this.scale)+i.$.skew(this.skew),this},n.position=n.position||{x:0,y:0},n.rotation=n.rotation||0,n.scale=n.scale||{x:1,y:1},n.skew=n.skew||{x:0,y:0},n.translates=function(t,e){return this.position.x=t,this.position.y=e,this.transforms(),this},n.rotate=function(t){return this.rotation=t,this.transforms(),this},n.resize=function(t,e){return this.scale.x=t,this.scale.y=e,this.transforms(),this},n.setSkew=function(t,e){return this.skew.x=t,this.skew.y=e,this.transforms(),this}),n},i.sys.browserType){case i.sys.BROWSER_TYPE_FIREFOX:i.$.pfx="Moz",i.$.hd=!0;break;case i.sys.BROWSER_TYPE_CHROME:case i.sys.BROWSER_TYPE_SAFARI:i.$.pfx="webkit",i.$.hd=!0;break;case i.sys.BROWSER_TYPE_OPERA:i.$.pfx="O",i.$.hd=!1;break;case i.sys.BROWSER_TYPE_IE:i.$.pfx="ms",i.$.hd=!1;break;default:i.$.pfx="webkit",i.$.hd=!0}i.$.trans=i.$.pfx+"Transform",i.$.translate=i.$.hd?function(t){return"translate3d("+t.x+"px, "+t.y+"px, 0) "}:function(t){return"translate("+t.x+"px, "+t.y+"px) "},i.$.rotate=i.$.hd?function(t){return"rotateZ("+t+"deg) "}:function(t){return"rotate("+t+"deg) "},i.$.scale=function(t){return"scale("+t.x+", "+t.y+") "},i.$.skew=function(t){return"skewX("+-t.x+"deg) skewY("+t.y+"deg)"},i.$new=function(t){return i.$(document.createElement(t))},i.$.findpos=function(t){var e=0,n=0;do e+=t.offsetLeft,n+=t.offsetTop;while(t=t.offsetParent);return{x:e,y:n}},t.exports=i},function(t,e,n){var i=n(1);i.Node=i.Class.extend({_localZOrder:0,_position:null,_anchorPoint:null,_rotationX:0,_rotationY:0,_rotationRadiansX:0,_rotationRadiansY:0,_scaleX:1,_scaleY:1,_children:null,_visible:!0,_parent:null,tag:null,name:null,userData:null,_className:"Node",_contentSize:null,_initializedNode:!1,_running:!1,_cacheDirty:!0,_anchorPointInPoints:null,_transform:null,_skewX:0,_skewY:0,_ignoreAnchorPointForPosition:!1,_additionalTransform:null,_transformDirty:!1,_reorderChildDirty:!1,_initNode:function(){var t=this;t._anchorPoint=i.p(0,0),t._contentSize=i.size(0,0),t._position=i.p(0,0),t._children=[],t._initializedNode=!0,t._anchorPointInPoints=i.p(0,0),t._transform={a:1,b:0,c:0,d:1,tx:0,ty:0};var e=i.director;t.actionManager=e.getActionManager()},ctor:function(){this._initNode()},init:function(){return this._initializedNode===!1&&this._initNode(),!0},setRotation:function(t){this._rotationX=this._rotationY=t,this._rotationRadiansX=.017453292519943295*this._rotationX,this._rotationRadiansY=.017453292519943295*this._rotationY,this.setNodeDirty()},setRotationX:function(t){this._rotationX=t,this._rotationRadiansX=.017453292519943295*this._rotationX,this.setNodeDirty()},setRotationY:function(t){this._rotationY=t,this._rotationRadiansY=.017453292519943295*this._rotationY,this.setNodeDirty()},setScale:function(t,e){this._scaleX=t,this._scaleY=e||0===e?e:t,this.setNodeDirty()},getScale:function(){return this._scaleX},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getRotationX:function(){return this._rotationX},getRotationY:function(){return this._rotationY},getSkewX:function(){return this._skewX},setSkewX:function(t){this._skewX=t,this.setNodeDirty()},getSkewY:function(){return this._skewY},setSkewY:function(t){this._skewY=t,this.setNodeDirty()},getPosition:function(){return i.p(this._position)},setPosition:function(t,e){var n=this._position;void 0===e?(n.x=t.x,n.y=t.y):(n.x=t,n.y=e),this.setNodeDirty()},setNodeDirty:function(){var t=this;t._transformDirty===!1&&(t._transformDirty=t._inverseDirty=!0)},getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},isVisible:function(){return this._visible},setVisible:function(t){this._visible=t,this.setNodeDirty()},getAnchorPoint:function(){return this._anchorPoint},setAnchorPoint:function(t,e){var n=this._anchorPoint;if(void 0===e){if(t.x===n.x&&t.y===n.y)return;n.x=t.x,n.y=t.y}else{if(t===n.x&&e===n.y)return;n.x=t,n.y=e}var i=this._anchorPointInPoints,r=this._contentSize;i.x=r.width*n.x,i.y=r.height*n.y,this.setNodeDirty()},getContentSize:function(){return this._contentSize},setContentSize:function(t,e){var n=this._contentSize;if(void 0===e){if(t.width===n.width&&t.height===n.height)return;n.width=t.width,n.height=t.height}else{if(t===n.width&&e===n.height)return;n.width=t,n.height=e}var i=this._anchorPointInPoints,r=this._anchorPoint;i.x=n.width*r.x,i.y=n.height*r.y,this.setNodeDirty()},isRunning:function(){return this._running},getParent:function(){return this._parent},setParent:function(t){this._parent=t},getTag:function(){return this.tag},setTag:function(t){this.tag=t},getName:function(){return this.name},setName:function(t){this.name=t},getUserData:function(){return this.userData},setUserData:function(t){this.userData=t},getRotation:function(){return this._rotationX},cleanup:function(){this.stopAllActions(),i.EventManager.removeListeners(this),this._arrayMakeObjectsPerformSelector(this._children,i.Node.StateCallbackType.cleanup)},getChildByTag:function(t){var e=this._children;if(null!=e)for(var n=0;n<e.length;n++){var i=e[n];if(i&&i.tag==t)return i}return null},addChild:function(t,e,n){if(i.assert(t,"child must be non-null"),t===this)return void i.log("An Node can't be added as a child of itself.");if(null!==t._parent)return void i.log("child already added. It can't be added again");var r=null!=e?e:t._localZOrder;t.tag=null!=n?n:t.tag,this._insertChild(t,r),t._parent=this,null!==e&&(this._reorderChildDirty=!0),this._running&&t.onEnter()},removeFromParent:function(t){this._parent&&(null==t&&(t=!0),this._parent.removeChild(this,t))},removeChild:function(t,e){0!==this._children.length&&(null==e&&(e=!0),this._children.indexOf(t)>-1&&this._detachChild(t,e),this.setNodeDirty())},removeChildByTag:function(t,e){var n=this.getChildByTag(t);null==n?i.log("没有找到tag"):this.removeChild(n,e)},removeAllChildren:function(t){var e=this._children;if(null!=e){null==t&&(t=!0);for(var n=0;n<e.length;n++){var i=e[n];i&&(this._running&&(i.onExitTransitionDidStart(),i.onExit()),t&&i.cleanup(),i.parent=null)}this._children.length=0}},sortAllChildren:function(){if(this._reorderChildDirty){var t,e,n,i=this._children,r=i.length;for(t=1;t<r;t++){for(n=i[t],e=t-1;e>=0;){if(n._localZOrder<i[e]._localZOrder)i[e+1]=i[e];else{if(!(n._localZOrder===i[e]._localZOrder&&n.arrivalOrder<i[e].arrivalOrder))break;i[e+1]=i[e]}e--}i[e+1]=n}this._reorderChildDirty=!1}},_detachChild:function(t,e){this._running&&t.onExit(),e&&t.cleanup(),t.parent=null,i.arrayRemoveObject(this._children,t)},onExit:function(){this._running=!1,this.pause(),this._arrayMakeObjectsPerformSelector(this._children,i.Node.StateCallbackType.onExit)},pause:function(){this.actionManager&&this.actionManager.pauseTarget(this)},_arrayMakeObjectsPerformSelector:function(t,e){if(t&&0!==t.length){var n,r,o=t.length,s=i.Node.StateCallbackType;switch(e){case s.onEnter:for(n=0;n<o;n++)r=t[n],r&&r.onEnter();break;case s.onExit:for(n=0;n<o;n++)r=t[n],r&&r.onExit();break;case s.onEnterTransitionDidFinish:for(n=0;n<o;n++)r=t[n],r&&r.onEnterTransitionDidFinish();break;case s.cleanup:for(n=0;n<o;n++)r=t[n],r&&r.cleanup();break;case s.updateTransform:for(n=0;n<o;n++)r=t[n],r&&r.updateTransform();break;case s.onExitTransitionDidStart:for(n=0;n<o;n++)r=t[n],r&&r.onExitTransitionDidStart();break;case s.sortAllChildren:for(n=0;n<o;n++)r=t[n],r&&r.sortAllChildren();break;default:i.assert(0,"没有这样的type")}}},onEnter:function(){this._isTransitionFinished=!1,this._running=!0,this._arrayMakeObjectsPerformSelector(this._children,i.Node.StateCallbackType.onEnter),this.resume()},resume:function(){this.actionManager&&this.actionManager.resumeTarget(this)},_insertChild:function(t,e){this._children.push(t),t._setLocalZOrder(e)},setLocalZOrder:function(t){this._localZOrder=t,this._parent&&this._parent.reorderChild(this,t)},reorderChild:function(t,e){i.assert(t,"child must be non-null"),t._setLocalZOrder(e),this.setNodeDirty(),this._reorderChildDirty=!0},_setLocalZOrder:function(t){this._localZOrder=t;
},draw:function(t){},runAction:function(t){return this.actionManager.addAction(t,this,!this._running),t},stopAllActions:function(){this.actionManager&&this.actionManager.removeAllActionsFromTarget(this)},stopAction:function(t){this.actionManager.removeAction(t)},schedule:function(t,e,n,r){e=e||0,i.assert(t,"回调函数是空"),i.assert(e>=0,"间隔时间必须大于0"),n=null==n?-1:n,r=r||0},unscheduleAllCallbacks:function(){},update:function(t){},visit:function(t){var e=this;if(e._visible){var n,r,o=t||i._renderContext,s=e._children;o.save(),e.transform(o);var a=s.length;if(a>0){for(e.sortAllChildren(),n=0;n<a&&(r=s[n],r._localZOrder<0);n++)r.visit(o);for(e.draw(o);n<a;n++)s[n].visit(o)}else e.draw(o);this._cacheDirty=!1,e.arrivalOrder=0,o.restore()}},transform:function(t){var e=t||i._renderContext,n=this;e.translate(n._position.x,-n._position.y),e.scale(n._scaleX,n._scaleY),e.rotate(n._rotationRadiansX)},isIgnoreAnchorPointForPosition:function(){return this._ignoreAnchorPointForPosition},ignoreAnchorPointForPosition:function(t){t!=this._ignoreAnchorPointForPosition&&(this._ignoreAnchorPointForPosition=t,this.setNodeDirty())},setAdditionalTransform:function(t){this._additionalTransform=t,this._transformDirty=!0,this._additionalTransformDirty=!0}}),i.Node.StateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,updateTransform:5,onExitTransitionDidStart:6,sortAllChildren:7},i.Node.create=function(){return new i.Node},t.exports=i},function(t,e,n){var i=n(1);i.Scene=i.Node.extend({_className:"Scene",ctor:function(){i.Node.prototype.ctor.call(this),this._ignoreAnchorPointForPosition=!0,this.setAnchorPoint(.5,.5),this.setContentSize(i.director.getWinSize())}}),i.Scene.create=function(){return new i.Scene},t.exports=i},function(t,e,n){var i=n(1);i.Sprite=i.Node.extend({_loadedEventListeners:null,_rect:null,_rectRotated:!1,addLoadedEventListener:function(t,e){this._loadedEventListeners||(this._loadedEventListeners=[]),this._loadedEventListeners.push({eventCallback:t,eventTarget:e})},_callLoadedEventCallbacks:function(){if(this._loadedEventListeners){for(var t=this._loadedEventListeners,e=0,n=t.length;e<n;e++){var i=t[e];i.eventCallback.call(i.eventTarget,this)}t.length=0}},isTextureRectRotated:function(){return this._rectRotated},getTextureRect:function(){return i.rect(this._rect.x,this._rect.y,this._rect.width,this._rect.height)},sortAllChildren:function(){if(this._reorderChildDirty){var t,e,n,i=this._children,r=i.length;for(t=1;t<r;t++){for(n=i[t],e=t-1;e>=0;){if(n._localZOrder<i[e]._localZOrder)i[e+1]=i[e];else{if(!(n._localZOrder===i[e]._localZOrder&&n.arrivalOrder<i[e].arrivalOrder))break;i[e+1]=i[e]}e--}i[e+1]=n}this._reorderChildDirty=!1}},initWithFile:function(t,e){i.assert(t,"把文件名传进来啊");var n=i.textureCache.textureForKey(t);if(n){if(!e){var r=n.getContentSize();e=i.rect(0,0,r.width,r.height)}return this.initWithTexture(n,e)}return n=i.textureCache.addImage(t),this.initWithTexture(n,e||i.rect(0,0,n._contentSize.width,n._contentSize.height))},_textureLoadedCallback:function(t){var e=this;if(!e._textureLoaded){e._textureLoaded=!0;var n=e._rect;n?i._rectEqualToZero(n)&&(n.width=t.width,n.height=t.height):n=i.rect(0,0,t.width,t.height),e.texture=t,e._texture=t,e.setTextureRect(n,e._rectRotated),e._callLoadedEventCallbacks()}},init:function(){var t=this;return arguments.length>0?t.initWithFile(arguments[0],arguments[1]):(i.Node.prototype.init.call(t),t.texture=null,t._textureLoaded=!0,t._anchorPoint=i.p(.5,.5),t.setTextureRect(i.rect(0,0,0,0),!1,i.size(0,0)),!0)},initWithTexture:function(t,e,n){var r=this;if(n=n||!1,n&&t.isLoaded()){var o=t.getHtmlElementObj();o=i.cutRotateImageToCanvas(o,e);var s=new i.Texture2D;s.initWithElement(o),s.handleLoadedTexture(),t=s,r._rect=i.rect(0,0,e.width,e.height)}if(!i.Node.prototype.init.call(r))return!1;r._anchorPoint=i.p(.5,.5);var a=t.isLoaded();if(r._textureLoaded=a,!a)return r._rectRotated=n,e&&(r._rect.x=e.x,r._rect.y=e.y,r._rect.width=e.width,r._rect.height=e.height),t.addLoadedEventListener(r._textureLoadedCallback,r),!0;if(e||(e=i.rect(0,0,t.width,t.height)),t){var c=e.x+e.width,u=e.y+e.height;c>t.width&&i.error("超出边界",t.url),u>t.height&&i.error("超出边界",t.url)}return r._originalTexture=t,r.texture=t,r._texture=t,r.setTextureRect(e,n),!0},initWithSpriteFrame:function(t){var e=t._rotated,n=this.initWithTexture(t.getTexture(),t.getRect(),e);return this.setSpriteFrame(t),n},setSpriteFrame:function(t){var e=t.getTexture(),n=t.getRect(),i=t.isRotated();this._texture!=e&&(this._texture=e,this.texture=e),this.setTextureRect(n,i)},setTextureRect:function(t,e,n){var i=this;i._rectRotated=e||!1;var r=i._textureRect_Canvas;r.x=0|t.x,r.y=0|t.y,r.width=0|t.width,r.height=0|t.height,i._rect=i._textureRect_Canvas,i.setContentSize(n||t)},_softInit:function(t,e,n){if(void 0===t)i.Sprite.prototype.init.call(this);else if("string"==typeof t)if("#"===t[0]){t.substr(1,t.length-1)}else i.Sprite.prototype.init.call(this,t,e);else"object"==typeof t&&this.initWithSpriteFrame(t)},ctor:function(t,e,n){var r=this;i.Node.prototype.ctor.call(r),r._rect=i.rect(0,0,0,0),r._textureLoaded=!0,r._textureRect_Canvas={x:0,y:0,width:0,height:0,validRect:!1},r._softInit(t,e,n)},draw:function(t){var e=this;if(e._textureLoaded){var n=t||i._renderContext,r=e._textureRect_Canvas,o=e._anchorPoint,s=i.p(o.x*r.width,o.y*r.height),a=i.rect(-s.x,-r.height+s.y,r.width,r.height);if(e._texture){var c=e._texture.getHtmlElementObj();n.drawImage(c,r.x,r.y,r.width,r.height,a.x,a.y,a.width,a.height)}i.g_NumberOfDraws++}},getDrawRect:function(){var t=this,e=t._textureRect_Canvas,n=t._anchorPoint,r=i.p(n.x*e.width,n.y*e.height);return i.rect(-r.x,-r.y,e.width,e.height)},isContain:function(t){var e=this.getDrawRect(),n=this.getPosition(),i=n.x+e.x,r=i+e.width,o=n.y+e.y,s=o+e.height;return t.x>i&&t.x<r&&t.y>o&&t.y<s}}),i.Sprite.create=function(t,e,n){return new i.Sprite(t,e,n)},i.cutRotateImageToCanvas=function(t,e){if(!t)return null;if(!e)return t;var n=i.newElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(-1.5707963267948966),r.drawImage(t,e.x,e.y,e.height,e.width,-e.height/2,-e.width/2,e.height,e.width),n},t.exports=i},function(t,e,n){var i=n(1);i.Label=i.Sprite.extend({_selfString:"",_fontStyle:"黑体",_fontSize:20,_isUpdate:!1,_fillColorStr:"rgba(0,0,0,255)",_displayedOpacity:255,ctor:function(t,e,n){this._super(),this._selfString=t,this._fontStyle=e||this._fontStyle,this._fontSize=n||this._fontSize},setString:function(t){this._selfString=t,this._isUpdate=!0},setFontSize:function(t){this._fontSize=t,this._isUpdate=!0},setColor:function(t){this._fillColorStr="rgba("+t.r+","+t.g+","+t.b+","+this._displayedOpacity/255+")",this._isUpdate=!0},draw:function(t){this._selfString&&""!=this._selfString&&this._updateTexture(t)},_updateTexture:function(t){return t.save(),0!=this._selfString.length&&(t.font=this._fontSize+"px "+this._fontStyle,t.fillStyle=this._fillColorStr,t.fillText(this._selfString,0,0)),t.restore(),!0},setPosition:function(t,e){this._super(t,e),this._isUpdate=!0}}),i.Label.create=function(t,e,n){return new i.Label(t,e,n)},t.exports=i},function(t,e,n){var i=n(1);i.SpriteFrame=i.Class.extend({_rect:null,_texture:null,_rotated:!1,ctor:function(){},initWithTexture:function(t,e,n){var i=this;return n=n||!1,i._rect=e,i.texture=t,i._texture=t,i._rotated=n,!0},initWithFile:function(t,e){i.assert(t,"把文件名传进来啊");var n=i.textureCache.textureForKey(t);if(n){if(!e){var r=n.getContentSize();e=i.rect(0,0,r.width,r.height)}return this.initWithTexture(n,e)}return n=i.textureCache.addImage(t),this.initWithTexture(n,e||i.rect(0,0,n._contentSize.width,n._contentSize.height))},setTexture:function(t){this._texture=t},getTexture:function(){return this._texture},getRect:function(){return this._rect},setRect:function(t){this._rect=t},isRotated:function(){return this._rotated}}),i.SpriteFrame.create=function(t,e,n){var r=new i.SpriteFrame;return r.initWithTexture(t,e,n),r},i.SpriteFrame.createWithFile=function(t){var e=new i.SpriteFrame;return e.initWithFile(t),e},t.exports=i},function(t,e,n){var i=n(1);i.SpriteFrameCache=i.Class.extend({_CCNS_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_CCNS_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,_spriteFrames:null,_frameConfigCache:null,ctor:function(){this._spriteFrames=[],this._frameConfigCache=[]},_getFrameConfig:function(t){var e=i.loader.getRes(t);if(i.loader.release(t),e._inited)return this._frameConfigCache[t]=e,e;var n=e.frames,r=e.metadata||e.meta,o={},s={},a=0;if(r){var c=r.format;a=c.length<=1?parseInt(c):c,s.image=r.textureFileName||r.textureFileName||r.image}for(var u in n){var h=n[u];if(h){var l={};if(0==a){l.rect=i.rect(h.x,h.y,h.width,h.height),l.rotated=!1,l.offset=i.p(h.offsetX,h.offsetY);var d=h.originalWidth,_=h.originalHeight;d&&_||i.log("在 qcspriteFrameCache 37行"),d=Math.abs(d),_=Math.abs(_),l.size=i.size(d,_)}else if(1==a||2==a)l.rect=this._rectFromString(h.frame),l.rotated=h.rotated||!1,l.offset=this._pointFromString(h.offset),l.size=this._sizeFromString(h.sourceSize);else if(3==a){var f=this._sizeFromString(h.spriteSize),g=this._rectFromString(h.textureRect);f&&(g=i.rect(g.x,g.y,f.width,f.height)),l.rect=g,l.rotated=h.textureRotated||!1,l.offset=this._pointFromString(h.spriteOffset),l.size=this._sizeFromString(h.spriteSourceSize),l.aliases=h.aliases}else{var p=h.frame,v=h.sourceSize;u=h.filename||u,l.rect=i.rect(p.x,p.y,p.w,p.h),l.rotated=h.rotated||!1,l.offset=i.p(0,0),l.size=i.size(v.w,v.h)}o[u]=l}}var m=this._frameConfigCache[t]={_inited:!0,frames:o,meta:s};return m},_rectFromString:function(t){var e=this._CCNS_REG2.exec(t);return e?i.rect(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])):i.rect(0,0,0,0)},_sizeFromString:function(t){var e=this._CCNS_REG1.exec(t);return e?i.size(parseFloat(e[1]),parseFloat(e[2])):i.size(0,0)},_pointFromString:function(t){var e=this._CCNS_REG1.exec(t);return e?i.p(parseFloat(e[1]),parseFloat(e[2])):i.p(0,0)},addSpriteFrames:function(t,e){var n=this._frameConfigCache[t]||i.loader.getRes(t);if(n&&n.frames){var r=this,o=r._frameConfigCache[t]||r._getFrameConfig(t),s=o.frames;e=i.textureCache.addImage(e);var a=r._spriteFrames;for(var c in s){var u=s[c],h=a[c];if(!h){if(h=i.SpriteFrame.create(e,u.rect,u.rotated),h.isRotated()){var l=h.getTexture();if(l.isLoaded()){var d=h.getTexture().getHtmlElementObj();d=i.cutRotateImageToCanvas(d,h.getRect());var _=new i.Texture2D;_.initWithElement(d),_.handleLoadedTexture(),h.setTexture(_);var f=h._rect;h.setRect(i.rect(0,0,f.width,f.height))}}a[c]=h}}}},addSpriteFrame:function(t,e){this._spriteFrames[t]=e},getSpriteFrame:function(t){return this._spriteFrames[t]}}),i.SpriteFrameCache._instance=null,i.SpriteFrameCache._getInstance=function(){return null==i.SpriteFrameCache._instance&&(i.SpriteFrameCache._instance=new i.SpriteFrameCache),i.SpriteFrameCache._instance},t.exports=i},function(t,e,n){var i=n(1);i.SAXParser=i.Class.extend({_parser:null,_isSupportDOMParser:null,ctor:function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1},parse:function(t){return this._parseXML(t)},_parseXML:function(t){var e;return this._isSupportDOMParser?e=this._parser.parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)),e}}),i.PlistParser=i.SAXParser.extend({parse:function(t){var e=this._parseXML(t),n=e.documentElement;if("plist"!=n.tagName)throw"Not a plist file!";for(var i=null,r=0,o=n.childNodes.length;r<o&&(i=n.childNodes[r],1!=i.nodeType);r++);return e=null,this._parseNode(i)},_parseNode:function(t){var e=null,n=t.tagName;if("dict"==n)e=this._parseDict(t);else if("array"==n)e=this._parseArray(t);else if("string"==n)if(1==t.childNodes.length)e=t.firstChild.nodeValue;else{e="";for(var i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].nodeValue}else"false"==n?e=!1:"true"==n?e=!0:"real"==n?e=parseFloat(t.firstChild.nodeValue):"integer"==n&&(e=parseInt(t.firstChild.nodeValue,10));return e},_parseArray:function(t){for(var e=[],n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];1==r.nodeType&&e.push(this._parseNode(r))}return e},_parseDict:function(t){for(var e={},n=null,i=0,r=t.childNodes.length;i<r;i++){var o=t.childNodes[i];1==o.nodeType&&("key"==o.tagName?n=o.firstChild.nodeValue:e[n]=this._parseNode(o))}return e}}),i.plistParser=new i.PlistParser,t.exports=i},function(t,e,n){var i=n(1);i.Layer=i.Node.extend({_isBaked:!1,_bakeSprite:null,_className:"Layer",ctor:function(){var t=i.Node.prototype;t.ctor.call(this),this._ignoreAnchorPointForPosition=!0,t.setAnchorPoint.call(this,.5,.5),t.setContentSize.call(this,i.winSize)},bake:null,unbake:null,isBaked:function(){return this._isBaked},visit:function(t){if(!this._isBaked)return void i.Node.prototype.visit.call(this,t)},translateToLayer:function(t){var e=this.getPosition();return i.p(t.x-e.x,t.y-e.y)}}),i.Layer.create=function(){return new i.Layer},t.exports=i},function(t,e,n){var i=n(1);i.Texture2D=i.Class.extend({_contentSize:null,_isLoaded:!1,_htmlElementObj:null,_loadedEventListeners:null,url:null,ctor:function(){this._contentSize=i.size(0,0),this._isLoaded=!1,this._htmlElementObj=null},initWithElement:function(t){t&&(this._htmlElementObj=t)},getContentSize:function(){return this._contentSize},handleLoadedTexture:function(){var t=this;if(!t._isLoaded){if(!t._htmlElementObj){var e=i.loader.getRes(t.url);if(!e)return;t.initWithElement(e)}t._isLoaded=!0;var n=t._htmlElementObj;t._contentSize.width=n.width,t._contentSize.height=n.height,t._callLoadedEventCallbacks()}},releaseTexture:function(){},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._isLoaded},addLoadedEventListener:function(t,e){this._loadedEventListeners||(this._loadedEventListeners=[]),this._loadedEventListeners.push({eventCallback:t,eventTarget:e})},removeLoadedEventListener:function(t){if(this._loadedEventListeners)for(var e=this._loadedEventListeners,n=0;n<e.length;n++){var i=e[n];i.eventTarget==t&&e.splice(n,1)}},_callLoadedEventCallbacks:function(){if(this._loadedEventListeners){for(var t=this._loadedEventListeners,e=0,n=t.length;e<n;e++){var i=t[e];i.eventCallback.call(i.eventTarget,this)}t.length=0}}}),t.exports=i},function(t,e,n){var i=n(1);i.textureCache={_textures:{},textureForKey:function(t){return this._textures[t]},getKeyByTexture:function(t){for(var e in this._textures)if(this._textures[e]==t)return e;return null},removeTexture:function(t){if(t){var e=this._textures;for(var n in e)e[n]==t&&(e[n].releaseTexture(),delete e[n])}},removeTextureForKey:function(t){null!=t&&this._textures[t]&&delete this._textures[t]},cacheImage:function(t,e){if(e instanceof i.Texture2D)return void(this._textures[t]=e);var n=new i.Texture2D;n.initWithElement(e),n.handleLoadedTexture(),this._textures[t]=n},addImage:function(t,e,n){var r=this._textures,o=r[t];return o?(e&&e.call(n),o):(o=r[t]=new i.Texture2D,o.url=t,i.loader.getRes(t)?o.handleLoadedTexture():i.loader._checkIsImageURL(t)?i.loader.load(t,function(t){e&&e.call(n)}):i.loader.cache[t]=i.loader.loadImg(t,function(n,r){return n?e?e(n):n:(i.textureCache.handleLoadedTexture(t),void(e&&e(null,r)))}),o)},handleLoadedTexture:function(t){var e=this._textures,n=e[t];n||(n=e[t]=new i.Texture2D,n.url=t),n.handleLoadedTexture()},_clear:function(){this._textures={},this._textureColorsCache={},this._textureKeySeq=0|1e3*Math.random(),this._loadedTexturesBefore={}}},t.exports=i},function(t,e,n){var i=n(1);i._txtLoader={load:function(t,e,n,r){i.loader.loadTxt(t,r)}},i.loader.register(["txt","xml","vsh","fsh","atlas"],i._txtLoader),i._jsonLoader={load:function(t,e,n,r){i.loader.loadJson(t,r)}},i.loader.register(["json","ExportJson"],i._jsonLoader),i._imgLoader={load:function(t,e,n,r){i.loader.cache[e]=i.loader.loadImg(t,function(t,n){return t?r(t):(i.textureCache.handleLoadedTexture(e),void r(null,n))})}},i.loader.register(["png","jpg","bmp","jpeg","gif","ico"],i._imgLoader),i._plistLoader={load:function(t,e,n,r){i.loader.loadTxt(t,function(t,e){return t?r(t):void r(null,i.plistParser.parse(e))})}},i.loader.register(["plist"],i._plistLoader),t.exports=i},function(t,e,n){var i=n(1);i.Touch=i.Class.extend({_point:null,_prevPoint:null,_id:0,_startPointCaptured:!1,_startPoint:null,ctor:function(t,e,n){this._point=i.p(t||0,e||0),this._id=n||0},getLocation:function(){return{x:this._point.x,y:this._point.y}},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocation:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getLocationInView:function(){return{x:this._point.x,y:this._point.y}},getPreviousLocationInView:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocationInView:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getID:function(){return this._id},getId:function(){return this._id},setTouchInfo:function(t,e,n){this._prevPoint=this._point,this._point=i.p(e||0,n||0),this._id=t,this._startPointCaptured||(this._startPoint=i.p(this._point),this._startPointCaptured=!0)},_setPoint:function(t,e){void 0===e?(this._point.x=t.x,this._point.y=t.y):(this._point.x=t,this._point.y=e)}}),t.exports=i},function(t,e,n){var i=n(1);i.Event=i.Class.extend({_type:0,_isStopped:!1,_currentTarget:null,_setCurrentTarget:function(t){this._currentTarget=t},ctor:function(t){this._type=t},getType:function(){return this._type},stopPropagation:function(){this._isStopped=!0},isStopped:function(){return this._isStopped},getCurrentTarget:function(){return this._currentTarget}}),i.EventTouch=i.Event.extend({_eventCode:0,_touches:null,ctor:function(t){i.Event.prototype.ctor.call(this,i.Event.TOUCH),this._touches=t||[]},getEventCode:function(){return this._eventCode},getTouches:function(){return this._touches},_setEventCode:function(t){this._eventCode=t},_setTouches:function(t){this._touches=t}}),i.Event.TOUCH=0,i.EventTouch.EventCode={BEGAN:0,MOVED:1,ENDED:2,CANCELLED:3},t.exports=i},function(t,e,n){var i=n(1);i.EventListener=i.Class.extend({_onEvent:null,_type:0,_registered:!1,_node:null,_paused:!1,_isEnabled:!0,ctor:function(t,e){this._onEvent=e,this._type=t||0},_setPaused:function(t){this._paused=t},_isPaused:function(){return this._paused},_setRegistered:function(t){this._registered=t},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_setSceneGraphPriority:function(t){this._node=t},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!=this._onEvent},clone:function(){return null},setEnabled:function(t){this._isEnabled=t},isEnabled:function(){return this._isEnabled}}),i._EventListenerTouchOneByOne=i.EventListener.extend({_claimedTouches:null,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,ctor:function(){i.EventListener.prototype.ctor.call(null,null),this._claimedTouches=[]},clone:function(){var t=new i._EventListenerTouchOneByOne;return t.onTouchBegan=this.onTouchBegan,t.onTouchMoved=this.onTouchMoved,t.onTouchEnded=this.onTouchEnded,t.onTouchCancelled=this.onTouchCancelled,t.swallowTouches=this.swallowTouches,t},checkAvailable:function(){return!!this.onTouchBegan}}),i.EventListener.TOUCH_ONE_BY_ONE=0,i.EventListener.create=function(t){var e=(t.event,new i._EventListenerTouchOneByOne);for(var n in t)e[n]=t[n];return e},t.exports=i},function(t,e,n){var i=n(1);i.EventManager={_listeners:[],_isEnabled:!0,addListener:function(t,e){if(t instanceof i.EventListener){if(t._isRegistered())return}else t=i.EventListener.create(t);t.checkAvailable()&&("number"!=typeof e&&(t._setPaused(!1),t.setEnabled(!0),t._setRegistered(!0),t._setSceneGraphPriority(e)),this._listeners.push(t))},removeListener:function(t){if(i.log(t),null!=t)for(var e=this._listeners,n=e.length,r=0;r<n;r++)if(t==e[r])return void e.splice(r,1)},dispatchEvent:function(t){if(this._isEnabled){if(!t||!t.getType)throw"event is undefined";return t.getType()==i.Event.TOUCH?void this._dispatchTouchEvent(t):void 0}},_dispatchTouchEvent:function(t){var e=this._listeners,n=t.getTouches(),i={event:t,touches:n,selTouch:null};if(e)for(var r=0;r<n.length;r++)if(i.selTouch=n[r],this._dispatchEventToListeners(e,this._onTouchEventCallback,i),t.isStopped())return},_dispatchEventToListeners:function(t,e,n){for(var i=t.length,r=0;r<i;r++){var o=t[r];if(o.isEnabled()&&!o._isPaused()&&o._isRegistered()&&e(o,n))break}},_onTouchEventCallback:function(t,e){if(!t._isRegistered)return!1;var n=e.event,r=e.selTouch;n._setCurrentTarget(t._node);var o=n.getEventCode(),s=i.EventTouch.EventCode;return o==s.BEGAN?t.onTouchBegan&&t.onTouchBegan(r,n):o===s.MOVED&&t.onTouchMoved?t.onTouchMoved(r,n):o===s.ENDED&&t.onTouchEnded&&t.onTouchEnded(r,n),!!n.isStopped()},handleTouchesBegin:function(t){var e=new i.EventTouch(t);e._eventCode=i.EventTouch.EventCode.BEGAN,this.dispatchEvent(e)},handleTouchesEnd:function(t){var e=t;if(e.length>0){var n=new i.EventTouch(e);n._eventCode=i.EventTouch.EventCode.ENDED,this.dispatchEvent(n)}},handleTouchesMove:function(t){var e=t;if(e.length>0){var n=new i.EventTouch(e);n._eventCode=i.EventTouch.EventCode.MOVED,this.dispatchEvent(n)}},getHTMLElementPosition:function(t){var e=document.documentElement,n=window,i=null;return i="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():t instanceof HTMLCanvasElement?{left:0,top:0,width:t.width,height:t.height}:{left:0,top:0,width:parseInt(t.style.width),height:parseInt(t.style.height)},{left:i.left+n.pageXOffset-e.clientLeft,top:i.top+n.pageYOffset-e.clientTop,width:i.width,height:i.height}},getPointByEvent:function(t,e){return null!=t.pageX?{x:t.pageX,y:t.pageY}:(e.left-=document.body.scrollLeft,e.top-=document.body.scrollTop,{x:t.clientX,y:t.clientY})},getTouchByXY:function(t,e,n){var r=this.convertToLocationInView(t,e,n),o=new i.Touch(r.x,r.y);return o},convertToLocationInView:function(t,e,n){var r=i.director.getWinSize(),o=r.width,s=r.height,a=n.left,c=n.top,u=n.width,h=n.height,l=(t-a)/u*o,d=(c+h-e)/h*s;return{x:l,y:d}},registerSystemEvent:function(t){var e=this,n="mouse"in i.sys.capabilities,r="touches"in i.sys.capabilities;n&&(i._addEventListener(t,"mousedown",function(n){e._mousePressed=!0;var i=e.getHTMLElementPosition(t),o=e.getPointByEvent(n,i);r||e.handleTouchesBegin([e.getTouchByXY(o.x,o.y,i)]),n.stopPropagation(),n.preventDefault(),t.focus()},!1),i._addEventListener(t,"mouseup",function(n){e._mousePressed=!1;var i=e.getHTMLElementPosition(t),o=e.getPointByEvent(n,i);r||e.handleTouchesEnd([e.getTouchByXY(o.x,o.y,i)]),n.stopPropagation(),n.preventDefault()},!1),i._addEventListener(t,"mousemove",function(n){var i=e.getHTMLElementPosition(t),o=e.getPointByEvent(n,i);!r&&e._mousePressed&&e.handleTouchesMove([e.getTouchByXY(o.x,o.y,i)]),n.stopPropagation(),n.preventDefault()},!1)),r&&(i._addEventListener(t,"touchstart",function(n){if(i.log("touchstart"),n.changedTouches){var r=e.getHTMLElementPosition(t);r.left-=document.body.scrollLeft,r.top-=document.body.scrollTop,e.handleTouchesBegin(e.getTouchesByEvent(n,r)),n.stopPropagation(),n.preventDefault(),t.focus()}},!1),i._addEventListener(t,"touchmove",function(n){if(i.log("touchstart"),n.changedTouches){var r=e.getHTMLElementPosition(t);r.left-=document.body.scrollLeft,r.top-=document.body.scrollTop,e.handleTouchesMove(e.getTouchesByEvent(n,r)),n.stopPropagation(),n.preventDefault()}},!1),i._addEventListener(t,"touchend",function(n){if(n.changedTouches){var i=e.getHTMLElementPosition(t);i.left-=document.body.scrollLeft,i.top-=document.body.scrollTop,e.handleTouchesEnd(e.getTouchesByEvent(n,i)),n.stopPropagation(),n.preventDefault()}},!1))},removeListeners:function(t){for(var e=t.__instanceId,n=this._listeners,i=0;i<n.length;i++){var r=n[i];r._node.__instanceId==e&&(r.setEnabled(!1),r._setRegistered(!1),n.splice(i,1),i--)}},isChildOfParent:function(t,e){return null!=t&&(t.__instanceId!=e?this.isChildOfParent(t.getParent(),e):void 0)},getTouchesByEvent:function(t,e){for(var n,r,o=[],s=t.changedTouches.length,a=0;a<s;a++)if(n=t.changedTouches[a]){var c;c=i.sys.BROWSER_TYPE_FIREFOX===i.sys.browserType?this.convertToLocationInView(n.pageX,n.pageY,e):this.convertToLocationInView(n.clientX,n.clientY,e),r=null!=n.identifier?new i.Touch(c.x,c.y,n.identifier):new i.Touch(c.x,c.y),o.push(r)}return o}},t.exports=i},function(t,e,n){var i=n(1);i.Action=i.Class.extend({originalTarget:null,target:null,tag:1,_duration:null,ctor:function(){this.originalTarget=null,this.target=null,this.tag=i.ACTION_TAG_INVALID},isDone:function(){return!0},startWithTarget:function(t){this.originalTarget=t,this.target=t},stop:function(){this.target=null},step:function(t){i.log("[Action step]. override me")},update:function(t){i.log("[Action update]. override me")},getTarget:function(){return this.target},setTarget:function(t){this.target=t},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(t){this.originalTarget=t},getTag:function(){return this.tag},setTag:function(t){this.tag=t}}),t.exports=i},function(t,e,n){var i=n(1);i.ScaleTo=i.Action.extend({_desScaleX:null,_desScaleY:null,_isDone:!1,speedX:0,speedY:0,timesum:0,ctor:function(t,e,n){this._super(),this._desScaleX=e,this._desScaleY=n||e,this._duration=t},startWithTarget:function(t){this._super(t);var e=t.getScaleX(),n=t.getScaleY();this.speedX=(this._desScaleX-e)/this._duration,this.speedY=(this._desScaleY-n)/this._duration,this.timesum=0,this._isDone=!1},step:function(t){this.timesum+=t;var e,n,i=this.target,r=i.getScaleX(),o=i.getScaleY();e=r+this.speedX*t,n=o+this.speedY*t,this.timesum>=this._duration&&(this._isDone=!0,e=this._desScaleX,n=this._desScaleY),this.target.setScale(e,n)},isDone:function(){return this._isDone}}),i.ScaleTo.create=function(t,e,n){return new i.ScaleTo(t,e,n)},t.exports=i},function(t,e,n){var i=n(1);i.HashElement=i.Class.extend({actions:null,target:null,actionIndex:0,currentAction:null,currentActionSalvaged:!1,paused:!1,hh:null,ctor:function(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.currentActionSalvaged=!1,this.paused=!1,this.hh=null}}),i.ActionManager=i.Class.extend({_hashTargets:null,_arrayTargets:null,_currentTarget:null,_currentTargetSalvaged:!1,_searchElementByTarget:function(t,e){for(var n=0;n<t.length;n++)if(e==t[n].target)return t[n];return null},ctor:function(){this._hashTargets={},this._arrayTargets=[],this._currentTarget=null,this._currentTargetSalvaged=!1},addAction:function(t,e,n){if(!t)throw"qc.ActionManager.addAction(): action must be non-null";if(!e)throw"qc.ActionManager.addAction(): action must be non-null";var r=this._hashTargets[e.__instanceId];r||(r=new i.HashElement,r.paused=n,r.target=e,this._hashTargets[e.__instanceId]=r,this._arrayTargets.push(r)),this._actionAllocWithHashElement(r),r.actions.push(t),t.startWithTarget(e)},removeAllActions:function(){for(var t=this._arrayTargets,e=0;e<t.length;e++){var n=t[e];n&&this.removeAllActionsFromTarget(n.target,!0)}},removeAllActionsFromTarget:function(t,e){if(null!=t){var n=this._hashTargets[t.__instanceId];n&&(n.actions.indexOf(n.currentAction)===-1||n.currentActionSalvaged||(n.currentActionSalvaged=!0),n.actions.length=0,this._currentTarget!=n||e?this._deleteHashElement(n):this._currentTargetSalvaged=!0)}},removeAction:function(t){if(null!=t){var e=t.getOriginalTarget(),n=this._hashTargets[e.__instanceId];if(n){for(var r=0;r<n.actions.length;r++)if(n.actions[r]==t){n.actions.splice(r,1);break}}else i.log(i._LogInfos.ActionManager_removeAction)}},removeActionByTag:function(t,e){var n=this._hashTargets[e.__instanceId];if(n)for(var i=n.actions.length,r=0;r<i;++r){var o=n.actions[r];if(o&&o.getTag()===t&&o.getOriginalTarget()==e){this._removeActionAtIndex(r,n);break}}},getActionByTag:function(t,e){var n=this._hashTargets[e.__instanceId];if(n&&null!=n.actions)for(var i=0;i<n.actions.length;++i){var r=n.actions[i];if(r&&r.getTag()===t)return r}return null},numberOfRunningActionsInTarget:function(t){var e=this._hashTargets[t.__instanceId];return e&&e.actions?e.actions.length:0},pauseTarget:function(t){var e=this._hashTargets[t.__instanceId];e&&(e.paused=!0)},resumeTarget:function(t){var e=this._hashTargets[t.__instanceId];e&&(e.paused=!1)},pauseAllRunningActions:function(){for(var t=[],e=this._arrayTargets,n=0;n<e.length;n++){var i=e[n];i&&!i.paused&&(i.paused=!0,t.push(i.target))}return t},resumeTargets:function(t){if(t)for(var e=0;e<t.length;e++)t[e]&&this.resumeTarget(t[e])},purgeSharedManager:function(){},_removeActionAtIndex:function(t,e){var n=e.actions[t];n!=e.currentAction||e.currentActionSalvaged||(e.currentActionSalvaged=!0),e.actions.splice(t,1),e.actionIndex>=t&&e.actionIndex--,0==e.actions.length&&(this._currentTarget==e?this._currentTargetSalvaged=!0:this._deleteHashElement(e))},_deleteHashElement:function(t){t&&(delete this._hashTargets[t.target.__instanceId],i.arrayRemoveObject(this._arrayTargets,t),t.actions=null,t.target=null)},_actionAllocWithHashElement:function(t){null==t.actions&&(t.actions=[])},update:function(t){for(var e,n=this._arrayTargets,i=0;i<n.length;i++){if(this._currentTarget=n[i],e=this._currentTarget,!e.paused)for(e.actionIndex=0;e.actionIndex<e.actions.length;e.actionIndex++)if(e.currentAction=e.actions[e.actionIndex],e.currentAction){if(e.currentActionSalvaged=!1,e.currentAction.step(t*(e.currentAction._speedMethod?e.currentAction._speed:1)),e.currentActionSalvaged)e.currentAction=null;else if(e.currentAction.isDone()){e.currentAction.stop();var r=e.currentAction;e.currentAction=null,this.removeAction(r)}e.currentAction=null}this._currentTargetSalvaged&&0===e.actions.length&&this._deleteHashElement(e)}}}),i.ActionManager.shareAcitonManager=null,i.ActionManager.firstUseManager=!0,i.ActionManager._getInstance=function(){return null==i.ActionManager.shareAcitonManager&&(i.ActionManager.firstUseManager=!1,i.ActionManager.shareAcitonManager=new i.ActionManager),i.ActionManager.shareAcitonManager},t.exports=i},function(t,e,n){var i=n(1);i.Animation=i.Class.extend({_frames:null,_delay:null,_loops:null,_currentIndex:null,_count:0,ctor:function(t,e,n){this._frames=t,this._delay=e,this._loops=n,this._currentIndex=-1,this._count=0},getLoops:function(){return this._loops},getDelay:function(){return this._delay},getFrames:function(){return this._frames},addFrame:function(t){this._frames.push(t)},removeFrameByIndex:function(t){t<this._frames.length-1&&t>=0&&this._frames.splice(t,1)},getNextFrame:function(){return this._currentIndex++,this._currentIndex>=this._frames.length&&(this._currentIndex=0,this._count++,this._loops&&this._count>=this._loops)?null:this._frames[this._currentIndex]}}),i.Animation.create=function(t,e,n){return new i.Animation(t,e,n)},t.exports=i},function(t,e,n){var i=n(1);i.Animate=i.Action.extend({_isDone:!1,_animation:null,_delay:null,_timeSum:0,ctor:function(t){this._super(),this._animation=t,this._delay=t.getDelay()},startWithTarget:function(t){this._super(t),this._timeSum=0,this._isDone=!1},step:function(t){if(this._timeSum+=t,this._timeSum>this._delay){var e=this._animation.getNextFrame();if(null==e)return void(this._isDone=!0);this.target.setSpriteFrame(e),this._timeSum-=parseInt(this._timeSum/this._delay)*this._delay}},isDone:function(){return this._isDone}}),i.Animate.create=function(t){return new i.Animate(t)},t.exports=i},function(t,e,n){var i=n(1);i.CallFunc=i.Action.extend({callBack:null,callTarget:null,_isDone:!1,ctor:function(t,e){this._super(),this.callBack=t,this.callTarget=e,this._duration=0},startWithTarget:function(t){this._super(t),this.callBack.call(this.callTarget),this._isDone=!0},step:function(t){},isDone:function(){return this._isDone}}),i.CallFunc.create=function(t,e){return new i.CallFunc(t,e)},t.exports=i},function(t,e,n){var i=n(1);i.MoveTo=i.Action.extend({desPos:null,startPos:null,allTime:0,speedX:0,speedY:0,_isDone:!1,ctor:function(t,e){this._super(),this._duration=t,this.desPos=e},startWithTarget:function(t){
this._super(t),this._isDone=!1,this.startPos=t.getPosition(),this.allTime=0,this.speedX=(this.desPos.x-this.startPos.x)/this._duration,this.speedY=(this.desPos.y-this.startPos.y)/this._duration},step:function(t){var e=this.target.getPosition(),n=i.p(e.x+this.speedX*t,e.y+this.speedY*t);this.allTime+=t,this.allTime>this._duration&&(n=this.desPos,this._isDone=!0),this.target.setPosition(n)},isDone:function(){return this._isDone}}),i.MoveTo.create=function(t,e){return new i.MoveTo(t,e)},i.MoveBy=i.MoveTo.extend({_movePos:null,ctor:function(t,e){this._super(t,e),this._movePos=e},startWithTarget:function(t){var e=t.getPosition();this.desPos=i.p(e.x+this._movePos.x,e.y+this._movePos.y),this._super(t)}}),i.MoveBy.create=function(t,e){return new i.MoveBy(t,e)},t.exports=i},function(t,e,n){var i=n(1);i.RepeatForever=i.Action.extend({selfAction:null,_isDone:!1,_loops:null,_count:0,_duration:0,ctor:function(t,e){this._super(),this.selfAction=t,this._loops=e},startWithTarget:function(t){this._super(t),this.selfAction.startWithTarget(t),this._count=0,this._isDone=!1},step:function(t){this.selfAction.step(t),this.selfAction.isDone()&&(this._count++,this._loops&&this._count>=this._loops?this._isDone=!0:this.selfAction.startWithTarget(this.target))},isDone:function(){return this._isDone}}),i.RepeatForever.create=function(t,e){return new i.RepeatForever(t,e)},t.exports=i},function(t,e,n){var i=n(1);i.RotateTo=i.Action.extend({desRotate:null,startRotate:null,allTime:0,speed:0,_isDone:!1,ctor:function(t,e){this._super(),this._duration=t,this.desRotate=e},startWithTarget:function(t){this._super(t),this._isDone=!1,this.startRotate=t.getRotation(),this.allTime=0,this.speed=(this.desRotate-this.startRotate)/this._duration},step:function(t){var e=this.target.getRotation(),n=e+this.speed*t;this.allTime+=t,this.allTime>this._duration&&(n=this.desRotate,this._isDone=!0),this.target.setRotation(n)},isDone:function(){return this._isDone}}),i.RotateTo.create=function(t,e){return new i.RotateTo(t,e)},t.exports=i},function(t,e,n){var i=n(1);i.Sequence=i.Action.extend({_actions:null,hasStartAction2:!1,_isDone:!1,ctor:function(t){this._super(),this._actions=[];var e=t instanceof Array?t:arguments,n=e.length-1;if(n>=0){for(var r,o=e[0],s=1;s<n;s++)e[s]&&(r=o,o=i.Sequence._actionOneTwo(r,e[s]));this.initWithTwoActions(o,e[n])}},initWithTwoActions:function(t,e){var n=t._duration+e._duration;return this.initWithDuration(n),this._actions[0]=t,this._actions[1]=e,!0},initWithDuration:function(t){this._duration=t},startWithTarget:function(t){this._super(t),this._actions[0].startWithTarget(t),this._isDone=!1,this.hasStartAction2=!1},step:function(t){var e=this._actions[0];if(this.hasStartAction2){var n=this._actions[1];return n.step(t),void(n.isDone()&&(this._isDone=!0))}if(e.step(t),e.isDone()){var n=this._actions[1];this.hasStartAction2||(n.startWithTarget(this.target),e.stop(),this.hasStartAction2=!0)}},isDone:function(){return this._isDone}}),i.Sequence._actionOneTwo=function(t,e){var n=new i.Sequence;return n.initWithTwoActions(t,e),n},i.Sequence.create=function(t){return new i.Sequence(t)},t.exports=i}]);