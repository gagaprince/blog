!function(e){function t(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){o(1)},function(e,t){"use strict";var o={init:function(){this.initListener()},_api:function(e,t,o){$.ajax({url:e,data:JSON.stringify(t),contentType:"application/json;charset=UTF-8",type:"POST",dataType:"json",timeout:3e4,success:function(e){"string"==typeof e&&(e=JSON.parse(e)),o&&o(e)}})},beginOp:function(){var e=$("#shareCode").val(),t=$("#waveSwing").val(),o=$("#startDate").val(),a=$("#endDate").val(),n=$("#initMoney").val(),i=$("#initPercent").val(),r=$("#waveShareNum").val(),l={shareCode:e,waveSwing:t,startDate:o,endDate:a,initMoney:n,initPercent:i,waveShareNum:r},s="/shares/littleWave/waveBegin",c=this;this._api(s,l,function(e){console.log(e),c.renderResult(l,e)})},renderResult:function(e,t){var o=e.shareCode,a=o.split(",");$("#chartFrame").html("");for(var n=0;n<a.length;n++){var i=a[n];this.appendChartItem(i);var r=t[i];console.log(r),r&&(e.code=i,this.renderAllMoneyChart(e,r),this.renderPriceChart(e,r))}},appendChartItem:function(e){$("#chartFrame").append(['<div class="chartlist h-c">','                <div id="waveChart_'+e+'" class="chart">',"                </div>",'                <div id="wavePriceChart_'+e+'" class="chart">',"                </div>","            </div>"].join(""))},initListener:function(){var e=this;$("#waveBtn").on("click",function(){e.beginOp()})},_findMinMax:function(e){for(var t=-1e4,o=1e4,a=0;a<e.length;a++){var n=e[a];n>t&&(t=n),n<o&&(o=n)}return{max:t,min:o,cha:t-o}},renderAllMoneyChart:function(e,t){for(var o=e.code+"代码"+e.startDate+"到"+e.endDate+"资金波动",a=[],n=[],i=[],r=t.length,l=0;l<r;l++){var s=t[l];a.push(s.allMoney/1e3),i.push(l),n.push(e.initMoney/1e3)}var c=this._findMinMax(a);console.log(a),console.log(c),console.log(Math.floor(c.min));var d=[{name:"总资金",value:a,color:"#ec4646",line_width:2},{name:"成本资金",value:n,color:"#4646ec",line_width:2}],h=new iChart.LineBasic2D({render:"waveChart_"+e.code,data:d,align:"center",title:{text:o,font:"微软雅黑",fontsize:24,color:"#b4b4b4"},subtitle:{text:"",font:"微软雅黑",color:"#b4b4b4"},footnote:{text:"小幅度波动分析",font:"微软雅黑",fontsize:11,fontweight:600,padding:"0 28",color:"#b4b4b4"},width:800,height:400,shadow:!0,shadow_color:"#ff0000",shadow_blur:8,shadow_offsetx:0,shadow_offsety:0,background_color:"#2e2e2e",animation:!0,animation_duration:600,tip:{enable:!0,shadow:!0,listeners:{parseText:function(e,o,a,n,i){return"总资金"==o?"<span style='color:#005268;font-size:12px;'>"+t[i].today+":日资金:<br/></span><span style='color:#005268;font-size:20px;'>"+a+"千元</span>":"<span style='color:#005268;font-size:12px;'>"+t[i].today+":日成本资金:<br/></span><span style='color:#005268;font-size:20px;'>"+a+"千元</span>"}}},crosshair:{enable:!0,line_color:"#ec4646"},sub_option:{smooth:!0,label:!1,hollow:!1,hollow_inside:!1,point_size:8},coordinate:{width:640,height:260,striped_factor:.18,grid_color:"#4e4e4e",axis:{color:"#252525",width:[0,0,4,4]},scale:[{position:"left",start_scale:Math.floor(c.min),end_scale:Math.ceil(c.max),scale_space:0,scale_size:2,scale_enable:!1,label:{color:"#9d987a",font:"微软雅黑",fontsize:11,fontweight:600},scale_color:"#9f9f9f"},{position:"bottom",label:{color:"#9d987a",font:"微软雅黑",fontsize:11,fontweight:600},scale_enable:!1,labels:i}]}});h.plugin(new iChart.Custom({drawFn:function(){var e=h.getCoordinate(),t=e.get("originx"),o=e.get("originy"),a=e.width,n=e.height;h.target.textAlign("start").textBaseline("bottom").textFont("600 11px 微软雅黑").fillText("资金(千元)",t-40,o-12,!1,"#9d987a").textBaseline("top").fillText("(时间)",t+a+12,o+n+10,!1,"#9d987a")}})),h.draw()},renderPriceChart:function(e,t){for(var o=e.code+"代码"+e.startDate+"到"+e.endDate+"价格波动",a=[],n=[],i=[],r=t.length,l=0;l<r;l++){var s=t[l];a.push(s.sharePrice),i.push(l),n.push(s.cbPrice)}var c=this._findMinMax([].concat(a,n)),d=[{name:"当前股价",value:a,color:"#ec4646",line_width:2},{name:"成本价",value:n,color:"#4646ec",line_width:2}],h=new iChart.LineBasic2D({render:"wavePriceChart_"+e.code,data:d,align:"center",title:{text:o,font:"微软雅黑",fontsize:24,color:"#b4b4b4"},subtitle:{text:"",font:"微软雅黑",color:"#b4b4b4"},footnote:{text:"小幅度价格波动分析",font:"微软雅黑",fontsize:11,fontweight:600,padding:"0 28",color:"#b4b4b4"},width:800,height:400,shadow:!0,shadow_color:"#ff0000",shadow_blur:8,shadow_offsetx:0,shadow_offsety:0,background_color:"#2e2e2e",animation:!0,animation_duration:600,tip:{enable:!0,shadow:!0,listeners:{parseText:function(e,o,a,n,i){return"当前股价"==o?"<span style='color:#005268;font-size:12px;'>"+t[i].today+":日当前价:<br/></span><span style='color:#005268;font-size:20px;'>"+a+"元</span>":"<span style='color:#005268;font-size:12px;'>"+t[i].today+":日成本价:<br/></span><span style='color:#005268;font-size:20px;'>"+a+"元</span>"}}},crosshair:{enable:!0,line_color:"#ec4646"},sub_option:{smooth:!0,label:!1,hollow:!1,hollow_inside:!1,point_size:8},coordinate:{width:640,height:260,striped_factor:.18,grid_color:"#4e4e4e",axis:{color:"#252525",width:[0,0,4,4]},scale:[{position:"left",start_scale:Math.floor(c.min),end_scale:Math.ceil(c.max),scale_space:0,scale_size:2,scale_enable:!1,label:{color:"#9d987a",font:"微软雅黑",fontsize:11,fontweight:600},scale_color:"#9f9f9f"},{position:"bottom",label:{color:"#9d987a",font:"微软雅黑",fontsize:11,fontweight:600},scale_enable:!1,labels:i}]}});h.plugin(new iChart.Custom({drawFn:function(){var e=h.getCoordinate(),t=e.get("originx"),o=e.get("originy"),a=e.width,n=e.height;h.target.textAlign("start").textBaseline("bottom").textFont("600 11px 微软雅黑").fillText("资金(千元)",t-40,o-12,!1,"#9d987a").textBaseline("top").fillText("(时间)",t+a+12,o+n+10,!1,"#9d987a")}})),h.draw()}};$(document).ready(function(){o.init()})}]);