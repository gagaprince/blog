!function(o){function t(n){if(i[n])return i[n].exports;var e=i[n]={exports:{},id:n,loaded:!1};return o[n].call(e.exports,e,e.exports,t),e.loaded=!0,e.exports}var i={};return t.m=o,t.c=i,t.p="",t(0)}([function(o,t,i){i(1)},function(o,t,i){"use strict";var n=i(2),e=i(3),s=i(5),a=6,r={init:function(){this.initPage(),this.initListener()},initPage:function(){var o=this;this.initBookList(function(t){o.renderPage(o.cloneNovelList(t))})},initListener:function(){$("body").on("click",".bookItem",function(){var o=$(this).attr("novelId");window.location.href="detail.html?novelId="+o}),$("body").on("click",".bookAddBtn",function(){window.location.href="index.html"})},initBookList:function(o){if(o){var t=e.getBookList();t&&t.length?o(t):n.giveMeRandomBooks(a,function(t){o(t),e.saveBookList(t)})}},renderPage:function(o){var t=s(o);$("#bookshelfFrame").html(t)},_filterNovelList:function(o){if(o)for(var t=0;t<o.length;t++){o[t]}},cloneNovelList:function(o){for(var t=[],i=0;i<o.length;i++){var e=o[i],s=n.clone(e);t.push(s)}return t}};$(document).ready(function(){r.init()})},function(o,t){"use strict";var i="/blog/pl/nv/novelListAll",n="/blog/pl/nv/novelListPage",e="/blog/pl/nv/novelCateListPage",s="/blog/pl/nv/getNovelContent",a="/blog/pl/nv/novelIndexListPage",r="/blog/pl/nv/novelRandomBooks",c="/blog/pl/nv/novelById",l="/blog/pl/nv/recommendPage",v="blog_touch_novel_history",u={novelHistory:null,_api:function(o,t,i){$.ajax({url:o,data:t,type:"POST",dataType:"json",timeout:3e4,success:function(o){"string"==typeof o&&(o=JSON.parse(o)),console.log(o);var t=o.status;i&&i(t.code,t.des,o.data,o)}})},giveMeNovelListAll:function(o){this._api(i,{},function(t,i,n,e){0==t&&o&&o(n)})},giveMeNovelListPage:function(o,t){this._api(n,{pno:o,psize:20},function(o,i,n,e){0==o&&t&&t(n)})},giveMeNovelCateListPage:function(o,t,i){this._api(e,{pno:o,psize:20,cate:t},function(o,t,n,e){0==o&&i&&i(n)})},giveMeNovelIndexListPage:function(o,t,i){this._api(a,{novelId:o,pno:t,psize:20},function(o,t,n,e){0==o&&i&&i(n)})},giveMeNovelByIdAndChapter:function(o,t,i){u._api(s,{novelId:o,chapter:t},function(o,t,n,e){0==o&&i&&i(n)})},giveMeRandomBooks:function(o,t){u._api(r,{num:o},function(o,i,n,e){0==o&&t&&t(n)})},giveMeNovelById:function(o,t){t&&u._api(c,{id:o},function(o,i,n,e){0==o&&t(n)})},giveMeNovelAllById:function(o,t){t&&u._api(c,{id:o,needAll:1},function(o,i,n,e){0==o&&t(n)})},giveMeRecommendData:function(o){o&&u._api(l,{},function(t,i,n,e){0==t&&o(n)})},getQueryString:function(o,t){var i=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),n=t||window.location.search.substr(1),e=n.match(i);return null!=e?decodeURIComponent(e[2]):null},initLocal:function(){this.novelHistory||(this.novelHistory=localStorage.getItem(v),this.novelHistory?this.novelHistory=JSON.parse(this.novelHistory):this.novelHistory={})},saveLocal:function(o,t,i){this.initLocal(),this.novelHistory[o]=[t,i],localStorage.setItem(v,JSON.stringify(this.novelHistory))},getLocal:function(o){return this.initLocal(),this.novelHistory[o]},clone:function(o){var t={};for(var i in o){var n=o[i];"object"==typeof n&&(n=this.clone(n)),t[i]=n}return t}};o.exports=u},function(o,t,i){"use strict";var n=i(4),e=i(2),s="blog_touch_book_list",a={getBookList:function(){var o=n.getItem(s);return o||(o=[]),o},saveBookList:function(o){o&&n.setItem(s,o)},addBook:function(o){if(o)if("string"==typeof o){var t=this;e.giveMeNovelById(o,function(o){t.addBook(o)})}else{var i=this.getBookList();this.isExistBookById(o,i)||(i.unshift(o),this.saveBookList(i))}},isExistBookById:function(o,t){var i=!1,n=o;"object"==typeof o&&(n=o.id),t||(t=this.getBookList());for(var e=0;e<t.length;e++){var o=t[e];if(o.id==n){i=!0;break}}return i},removeBookById:function(o){for(var t=this.getBookList(),i=0;i<t.length;i++){var n=t[i];if(n.id==o){t.splice(i,1);break}}this.saveBookList(t)},adjustTheFistBook:function(o){for(var t=this.getBookList(),i=0;i<t.length;i++){var n=t[i];if(n.id==o){var n=t.splice(i,1)[0];t.unshift(n);break}}this.saveBookList(t)},saveBookTag:function(o,t,i){var n=this.isExistBookById(o);n||this.addBook(o)}};o.exports=a},function(o,t){"use strict";var i=window.localStorage,n={setItem:function(o,t){if(t){var n=t;"object"==typeof t&&(n=JSON.stringify(t)),i.setItem(o,n)}},getItem:function(o){var t=i.getItem(o);return t&&(t=JSON.parse(t)),t}};o.exports=n},function(o,t){o.exports=function(o){var t="",i=o;i.push({tag:"jia"});var n=i;if(n)for(var e,s=-1,a=n.length-1;s<a;)e=n[s+=1],t+=" ",s%3==0&&(t+='<div class="bookshelf-item h-l"> '),t+=" ",t+="jia"!=e.tag?' <div class="book-frame h-c bookItem" onclick="" novelId="'+e.id+'"> <div class="book"> <img src="'+(e.cover?"http://www.37zw.com"+e.cover:"http://www.37zw.com/d/image/3/3911/3911s.jpg")+'" alt=""/> </div> </div> ':' <div class="book-frame h-c bookAddBtn" onclick=""> <div class="book h-c jia"> <img src="http://pic.sucaibar.com/pic/201307/16/311d33c37b.png" alt=""/> </div> </div> ',t+=" ",s%3==2&&(t+="</div> ");return(i.length-1)%3!=2&&(t+="</div>"),t}}]);