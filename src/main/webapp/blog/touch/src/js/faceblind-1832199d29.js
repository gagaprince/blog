!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";i(8)},,,,,,,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(9),o=n(r),a=i(10),s=n(a),l={init:function(){var e=this;this.showLoading(),o.default.init().then(function(){s.default.init(),e.hideLoading()})},showLoading:function(){$("#loading").show(),$("#gameStart").hide()},hideLoading:function(){$("#loading").hide(),$("#gameStart").show()}};$(document).ready(function(){l.init()})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[[1,2,3,4],[1,2,3],[1,2,3],[1,2,3],[1,2,3,4],[1,2,3,4],[1,2,3],[1,2,3,4],[1,2,3],[1,2,3],[1,2,3,4],[1,2,3,4],[1,2,3],[1,2,3],[2,3,4],[1,2,3],[1,2,3,4],[1,2,3,4],[1,2,3],[1,2,3,4],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3],[1,2,3,4],[1,2,3,4],[1,2],[1,2,3]];t.default={headPicList:[],preParedPics:function(){var e=this;this.headPicList=[];return i.forEach(function(t,i){t&&t.forEach(function(t,n){e.headPicList.push(e.findHeadByxy(i,n))})}),this.preloadPics(this.headPicList)},preloadPics:function(e){var t=this,i=[];return e.forEach(function(e,n){i.push(t._preloadImage(e).catch(function(t){console.log(e+" load error")}))}),Promise.all(i)},_preloadImage:function(e){return new Promise(function(t,i){var n=new Image;n.src=e,n.onload=t,n.onerror=i})},init:function(){return this.preParedPics().then(function(){console.log("头像下载完毕")})},findHeadByxy:function(e,t){return"https://as.alipayobjects.com/g/bisbiz-fe/mark-game/0.0.4/images/head/"+(e+1<10?"0"+(e+1):e+1)+"-"+i[e][t]+".jpg"},giveMeTheTopHead:function(){var e=i.length,t=Math.floor(Math.random()*e),n=i[t],r=n.length,o=Math.floor(Math.random()*r);return{peopleId:t,x:t,y:o,peopleHead:this.findHeadByxy(t,o)}},giveMeTheResultList:function(e,t){var i=this.fillRightPeopleMap(e),n=this.findSamePeople(e),r=this.findDiffPeoples(t-1,i);return r.push(n),r},findDiffPeoples:function(e,t){for(var n=[];e>0;){var r=i.length,o=Math.floor(Math.random()*r),a=i[o],s=a.length,l=Math.floor(Math.random()*s),h=o+"_"+l;t[h]||(e--,t[h]=1,n.push({peopleId:o,x:o,y:l,peopleHead:this.findHeadByxy(o,l)}))}return n},fillRightPeopleMap:function(e){for(var t=e.peopleId,n=i[t],r=n.length,o={},a=0;a<r;a++)o[t+"_"+a]=1;return o},findSamePeople:function(e){var t=e.peopleId,n=i[t],r=n.length,o=Math.floor(Math.random()*r);return o===e.y&&++o>=r&&(o=0),{peopleId:t,x:t,y:o,peopleHead:this.findHeadByxy(t,o)}}},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o={GAME_PRE:1,GAME_START:2,GAME_OVER:3};t.default={gameState:o.GAME_PRE,currentLevel:1,topPeople:null,nowTime:30,_timeInterval:null,init:function(){this.initListener()},gameBegin:function(){this.resetLevel(),this.hidePreAndOver(),this.gameState=o.GAME_START,this.refreshImg(),this.refreshTime(),this.beginTimeTask()},gameStop:function(){clearInterval(this._timeInterval),this._timeInterval=null,this.gameState=o.GAME_OVER,this.showOver()},beginTimeTask:function(){var e=this;this._timeInterval=setInterval(function(){e.nowTime--,e.nowTime<=0&&(e.nowTime=0,e.gameStop()),e.renderTime()},1e3)},resetLevel:function(){this.currentLevel=1,this.renderLevel()},refreshTime:function(){this.nowTime=30,this.renderTime()},renderTime:function(){$("#gameStart").find(".time").html((this.nowTime<0?"0":this.nowTime)+"s")},renderLevel:function(){$("#gameStart").find(".label").html("第"+this.currentLevel+"关"),$("#gameOver").find(".header-title").html("本测试你达到第"+this.currentLevel+"关")},refreshImg:function(){var e=this.currentLevel,t=parseInt(e/3)+2;10==t&&(t=9);var i=t*t,n=this.topPeople=r.default.giveMeTheTopHead(),o=r.default.giveMeTheResultList(n,i),a='<img src="'+n.peopleHead+'">';$("#gameStart").find(".top-img").html(a),$("#gameStart").find(".result-imgs").html(""),this.randomResult(o),o.forEach(function(e,i){var n='<div class="img-frame" peopleId="'+e.peopleId+'" onclick="" style="width:'+330/t+"px;height:"+330/t+'px;">\n                            <img class="cha" style="display: none;" src="http://p1.meituan.net/codeman/1682bc6167be5d8e3ddc69d984927cfd43141.png" alt="">\n                            <img class="mv" src="'+e.peopleHead+'" alt="">\n                          </div>';$("#gameStart").find(".result-imgs").append(n)})},randomResult:function(e){var t=Math.floor(Math.random()*e.length),i=e[t];e[t]=e[e.length-1],e[e.length-1]=i},hidePreAndOver:function(){$("#gamePre").hide(),$("#gameOver").hide()},showOver:function(){$("#gameOver").show()},levelPlus:function(){this.currentLevel++,this.refreshImg(),this.refreshTime(),this.renderLevel()},speedLowTime:function(){this.nowTime-=5,this.nowTime<=0&&(this.nowTime,this.gameStop()),this.renderTime()},initListener:function(){var e=this;$("#gamePre,#gameOver").find(".btn").on("click",function(){e.gameBegin()});var t=this;$("#gameStart").on("tap",".img-frame",function(){$(this).attr("peopleId")==t.topPeople.peopleId?($(this).find(".mv").addClass("right"),t.levelPlus()):(t.speedLowTime(),$(this).find(".mv").addClass("error"),$(this).find(".cha").show())})}},e.exports=t.default}]);